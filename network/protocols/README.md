> 2018-03-30

## 因特网协议分层模型

1. **第五层（或者OSI第七层）- 应用层 Http/SSH/TCP**：软件实现
1. **第四层 - 传输层TCP/UDP**：软件实现。
   - **“端口”**这个概念也在这一层被实现，网络层只负责**主机->主机**的数据传递，传输层则通过一个虚拟
     的“端口”实现**程序->程序**的数据传递。
1. 第三层 - 网络层：软件与硬件混合实现，算是五层协议里最复杂的一部分。
   1. data plane: forwarding 转发，由硬件实现。
      - 功能：在单个路由器中，将 packet 从输入端口转发到合适的输出端口。（这里的端口，指的是路由器的
        物理端口，和 tcp/udp 的端口不是一个概念）
      - 数据平面需要非常快的工作效率，尤其是在高速线路上，工作在 ns 尺度上，因此需要用硬件实现来保证
        正常工作。
   1. control plane: routing 路径选择，由软件实现。- 涉及算法，通常由软件实现。计算合适的路由路径，
      并据此完成对路由器 forwarding table 的更新。（还有部分网络管理功能）- 控制平面的路径选择算法、
      网络管理功能，相对数据平面而言对时间的要求不是那么高。工作在ms/s尺度上，更适合用软件实现。（由
      于其计算量大，而且路由器分布式布置，该算法通常实现为分布式）
      ![](https://img2018.cnblogs.com/blog/968138/201901/968138-20190122223404996-1997017084.png)
1. 第二层 - 数据链路层：负责特定链路的通信，常实现在硬件内。
   - 交换机通过 MAC 地址在链路层进行数据转发。(ARP 协议)
1. 第一层 - 物理层：负责处理物理信号（电信号、电磁波、光信号）和第二层数据包之间的转换（调制解调器，
   猫），硬件实现。

OSI七层模型，在应用层与运输层之间，多了一个表示层和会话层，而在因特网中这两层不一定需要，若有需要也
通常由软件自身实现。

虽然五层分层模型更符合实际，但目前各类文档都还是习惯将应用层称为「第七层」。

P.S. 软件实现的好处是成本低，也容易更改。 而硬件实现的好处是效率高，响应快，但是更改难，成本也高。
