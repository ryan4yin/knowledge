## vim 常用技巧

移动：
- `0`/`^` 回到行首，`$` 去到行末
- w 跳到下个单词的首部，e 跳到下个单词末尾
  - 也能使用 2w 2e 这种命令按单词数量跳转

删除 `d` 或修改 `c`:

- dw 删除单词，d2w 删除两个单词
- d$ 删除到行末，`d0`/`d^` 删除到行首
- `d(`/`d{`/`d[[` 删除到文件首部，`d)`/`d}`/`d]]` 删除到文件末尾
- `r` 替换一个字符，`R` 持续往后替换


## 多行修改

多行插入，主要用于加注释之类的：

- 光标停留在你需要插入文本的地方
- `ctrl`+`v` 进入 visual block 模式，选中多行
- 输入 `I`，进入编辑模式
- 输入 `#` 注释或者其他字符，但是注意不能输入换行符！也不能删除？
- 按两下 `Esc`，依次退出 Insert 和 visual block 模式，就插入成功了

多行删除：

- `v` 进入 visual 模式，在第一行，选中你想要删除的文本块
  - 或者也可以先进入 visual block 模式，再通过左右方向键选择文本。
- `ctrl`+`v` 进入 visual block 模式，选中多行
  - visual block 的特点是它是垂直选择，而 visual 模式是段落选择
- 按 `d` 键就能删除被选中的所有内容。


## 多行替换（基本和 sed 一致）

多行行首插入注释符号 `#`

```
:1,6 s/^/#/g
:2,$ s/^/#/g   注：此为2行至尾行
:% s/^/#/g     注：此为所有行
```

这里使用了正则表达式 `^` 匹配行首，改成 `$` 就可在行尾进行批量修改。

此外，它的分隔符也不仅限于 `\`，也可以用 `@` 等符号，方便阅读。比如：

```
:1,6 s@^@#@g
:2,$ s@^@#@g   注：此为2行至尾行
:% s@^@#@g     注：此为所有行
```

使用 vim 的这个正则匹配功能，不仅能进行插入，也能完成删除、替换的功能。

## 将选中部分写入到文件

- 首先按 `v` 进入 visual 模式，选中需要的内容
- 按 `:`，应该会显示 `:'<,'>`，表示对选中部分进行操作
- 输入内容 `w new.txt`，此时显示效果应该是 `:'<,'>w new.txt`
- 回车就能完成文件写入


## 问题：在 vim 中粘贴 yaml 时缩进会变得一团糟

解决方法：在命令模式下输入 `:set paste` 进入粘贴模式，然后再粘贴 yaml 内容。
注意行首可能会丢失几个字符，需要手动补上。

