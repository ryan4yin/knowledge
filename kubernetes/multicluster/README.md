# 多集群管理

通常单个 Kubernetes 集群已经足够使用了，但是也要看到它仍然有局限性：

- 控制面可靠性：在版本升级、试用新功能时，始终存在一定的概率，集群控制面出现问题。我就遇到过在试用 `spec.behavior` 时，触发了 HPA 相关代码的空指针异常，导致 controller-manager 炸掉的情况。
- 多地容灾、就近访问：我们会需要在多地创建区域性的 Kubernetes 集群，统一管理、部署，再通过智能 DNS/LB 解析实现跨集群的就近访问、服务迁移能力。
- 集群容量：单个 Kubernetes 集群存在极限，官方宣称能管理 5000 节点，但实际上在 1000-1500 节点时，Etcd/APIServer 等组件就可能存在问题了。

因为上面这些问题，**多集群**仍然是有必要的。

但是多集群仍然存在几个重要的问题：

- 集群间的资源不平衡
- 跨集群访问困难
- 运维与管理成本高

针对这几个问题，社区也出现了一些解决方案：

- [karmada](https://github.com/karmada-io/karmada): 一款跨集群应用的管理系统，可以将一个应用同时部署在多个集群，并且可以跨集群做实例调度(资源管理)、服务发现+四层负载均衡（网络管理）。结合 Istio 能实现跨集群的七层负载均衡。
- [cluster-api](https://github.com/kubernetes-sigs/cluster-api): 类似 terraform/pulumi 等工具，它提供了声明式的 API 来简化多集群的配置、升级等工作.

